# 09-智能指针

## 本章概述

智能指针是 Rust 中的高级特性，它们不仅能存储数据的地址，还具有额外的元数据和功能。智能指针通常拥有它们指向的数据，而普通引用只是借用数据。理解智能指针对于编写复杂的 Rust 程序至关重要。

## 学习目标

- 理解智能指针的概念和作用
- 掌握 Box<T> 的使用场景
- 学会使用 Rc<T> 进行引用计数
- 理解 RefCell<T> 和内部可变性
- 掌握 Weak<T> 避免循环引用
- 学会实现自定义智能指针
- 理解 Deref 和 Drop trait

## 章节内容

### [01-Box 智能指针](01-box-pointer.md)
- Box<T> 的概念和用途
- 堆内存分配
- 递归类型的定义
- Box 的解引用

### [02-引用计数 Rc](02-reference-counting.md)
- Rc<T> 的使用场景
- 多重所有权模式
- 引用计数的工作原理
- 克隆 Rc 指针

### [03-内部可变性 RefCell](03-interior-mutability.md)
- RefCell<T> 的概念
- 运行时借用检查
- 内部可变性模式
- RefCell 与 Rc 的组合

### [04-弱引用 Weak](04-weak-references.md)
- 循环引用问题
- Weak<T> 的作用
- 父子节点关系
- 避免内存泄漏

### [05-自定义智能指针](05-custom-smart-pointers.md)
- 实现 Deref trait
- 实现 Drop trait
- 智能指针的设计模式
- 最佳实践

## 总结

智能指针是 Rust 中的强大工具，主要类型包括：

1. **Box<T>**：单一所有权的堆分配
2. **Rc<T>**：引用计数的多重所有权
3. **RefCell<T>**：运行时借用检查的内部可变性
4. **Weak<T>**：弱引用，避免循环引用
5. **自定义智能指针**：实现 Deref 和 Drop trait

关键要点：
- 理解不同智能指针的使用场景
- 避免循环引用导致的内存泄漏
- 合理使用内部可变性
- 考虑性能影响

## 下一步

完成本章学习后，请继续学习 [10-测试与文档](../10-测试与文档/README.md)。