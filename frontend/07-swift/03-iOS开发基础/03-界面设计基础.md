# ç•Œé¢è®¾è®¡åŸºç¡€

## ðŸ“– æ¦‚è¿°

ç•Œé¢è®¾è®¡æ˜¯iOSåº”ç”¨å¼€å‘çš„æ ¸å¿ƒçŽ¯èŠ‚ã€‚æœ¬ç« å°†æ·±å…¥å­¦ä¹ Interface Builderã€Storyboardã€Auto Layoutç­‰iOSç•Œé¢è®¾è®¡çš„åŸºç¡€å·¥å…·å’ŒæŠ€æœ¯ï¼Œå¸®ä½ æž„å»ºç¾Žè§‚ä¸”é€‚é…æ€§å¼ºçš„ç”¨æˆ·ç•Œé¢ã€‚

## ðŸŽ¯ å­¦ä¹ ç›®æ ‡

- ç†Ÿç»ƒä½¿ç”¨Interface Builderè¿›è¡Œç•Œé¢è®¾è®¡
- æŽŒæ¡Storyboardçš„ä½¿ç”¨å’Œæœ€ä½³å®žè·µ
- æ·±å…¥ç†è§£Auto Layoutçº¦æŸç³»ç»Ÿ
- å­¦ä¼šä½¿ç”¨Size Classeså®žçŽ°å“åº”å¼è®¾è®¡
- æŽŒæ¡Stack Viewçš„é«˜æ•ˆå¸ƒå±€
- äº†è§£åŠ¨æ€å­—ä½“å’Œæ— éšœç¢è®¾è®¡

## ðŸŽ¨ Interface Builder ç®€ä»‹

### ä»€ä¹ˆæ˜¯Interface Builder

Interface Builderï¼ˆIBï¼‰æ˜¯Xcodeå†…ç½®çš„å¯è§†åŒ–ç•Œé¢è®¾è®¡å·¥å…·ï¼Œå®ƒå…è®¸å¼€å‘è€…é€šè¿‡æ‹–æ‹½çš„æ–¹å¼è®¾è®¡iOSåº”ç”¨çš„ç”¨æˆ·ç•Œé¢ã€‚

### æ ¸å¿ƒç»„ä»¶

```
Interface Builder ç»„æˆ:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Canvas (ç”»å¸ƒ)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                   â”‚  â”‚
â”‚  â”‚            è§†å›¾æŽ§åˆ¶å™¨åœºæ™¯                            â”‚  â”‚
â”‚  â”‚                                                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                                         â”‚
â”œâ”€ Object Library (å¯¹è±¡åº“)                                â”‚
â”œâ”€ Inspector Panel (æ£€æŸ¥å™¨é¢æ¿)                           â”‚
â”œâ”€ Document Outline (æ–‡æ¡£å¤§çº²)                            â”‚
â””â”€ Size Inspector (å°ºå¯¸æ£€æŸ¥å™¨)                            â”‚
```

### Interface Builder åŸºæœ¬æ“ä½œ

#### 1. å¯¹è±¡åº“çš„ä½¿ç”¨

```swift
// è®¿é—®å¯¹è±¡åº“çš„æ–¹æ³•:
// æ–¹æ³•1: View â†’ Show Library
// æ–¹æ³•2: å¿«æ·é”® â‡§âŒ˜L
// æ–¹æ³•3: ç‚¹å‡»å·¥å…·æ å³ä¸Šè§’çš„ + æŒ‰é’®

// å¸¸ç”¨UIæŽ§ä»¶:
/*
åŸºç¡€æŽ§ä»¶:
â”œâ”€â”€ UILabel          // æ–‡æœ¬æ ‡ç­¾
â”œâ”€â”€ UIButton         // æŒ‰é’®
â”œâ”€â”€ UITextField      // æ–‡æœ¬è¾“å…¥æ¡†
â”œâ”€â”€ UITextView       // å¤šè¡Œæ–‡æœ¬
â”œâ”€â”€ UIImageView      // å›¾ç‰‡æ˜¾ç¤º
â”œâ”€â”€ UISlider         // æ»‘å—
â”œâ”€â”€ UISwitch         // å¼€å…³
â”œâ”€â”€ UISegmentedControl // åˆ†æ®µæŽ§åˆ¶å™¨
â””â”€â”€ UIProgressView   // è¿›åº¦æ¡

å®¹å™¨æŽ§ä»¶:
â”œâ”€â”€ UIView           // åŸºç¡€è§†å›¾
â”œâ”€â”€ UIScrollView     // æ»šåŠ¨è§†å›¾
â”œâ”€â”€ UIStackView      // æ ˆè§†å›¾
â”œâ”€â”€ UITableView      // è¡¨æ ¼è§†å›¾
â”œâ”€â”€ UICollectionView // é›†åˆè§†å›¾
â””â”€â”€ UIContainerView  // å®¹å™¨è§†å›¾

å¯¼èˆªæŽ§ä»¶:
â”œâ”€â”€ UINavigationController // å¯¼èˆªæŽ§åˆ¶å™¨
â”œâ”€â”€ UITabBarController     // æ ‡ç­¾æ æŽ§åˆ¶å™¨
â”œâ”€â”€ UIPageViewController   // åˆ†é¡µæŽ§åˆ¶å™¨
â””â”€â”€ UISplitViewController  // åˆ†å±æŽ§åˆ¶å™¨
*/
```

#### 2. å±žæ€§æ£€æŸ¥å™¨è¯¦è§£

```swift
// å±žæ€§æ£€æŸ¥å™¨é¢æ¿ (å³ä¾§é¢æ¿)
/*
æ£€æŸ¥å™¨ç±»åž‹:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ File Inspector      â”‚ // æ–‡ä»¶å±žæ€§
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Quick Help          â”‚ // å¿«é€Ÿå¸®åŠ©
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Identity Inspector  â”‚ // èº«ä»½æ£€æŸ¥å™¨
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Attributes Inspectorâ”‚ // å±žæ€§æ£€æŸ¥å™¨ â­
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Size Inspector      â”‚ // å°ºå¯¸æ£€æŸ¥å™¨ â­
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Connections Inspectorâ”‚ // è¿žæŽ¥æ£€æŸ¥å™¨ â­
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
*/

// UILabel å±žæ€§è®¾ç½®ç¤ºä¾‹:
/*
Attributes Inspector:
â”œâ”€â”€ Text: "Hello World"
â”œâ”€â”€ Color: Label Color
â”œâ”€â”€ Font: System 17.0
â”œâ”€â”€ Alignment: Natural
â”œâ”€â”€ Lines: 1 (0 = æ— é™åˆ¶)
â”œâ”€â”€ Line Break: Truncate Tail
â”œâ”€â”€ Baseline: Align Baselines
â””â”€â”€ Autoshrink: Fixed Font Size
*/
```

#### 3. è¿žæŽ¥ä»£ç çš„æ–¹æ³•

```swift
// åˆ›å»º IBOutlet è¿žæŽ¥:
// æ–¹æ³•1: å³é”®æ‹–æ‹½æŽ§ä»¶åˆ°ä»£ç 
// æ–¹æ³•2: Ctrl + æ‹–æ‹½æŽ§ä»¶åˆ°ä»£ç 
// æ–¹æ³•3: åœ¨Connections Inspectorä¸­æ‰‹åŠ¨è¿žæŽ¥

class ViewController: UIViewController {
    
    // IBOutlet ç¤ºä¾‹
    @IBOutlet weak var titleLabel: UILabel!
    @IBOutlet weak var nameTextField: UITextField!
    @IBOutlet weak var submitButton: UIButton!
    @IBOutlet weak var profileImageView: UIImageView!
    
    // IBAction ç¤ºä¾‹
    @IBAction func submitButtonTapped(_ sender: UIButton) {
        // æŒ‰é’®ç‚¹å‡»äº‹ä»¶å¤„ç†
        handleSubmit()
    }
    
    @IBAction func textFieldChanged(_ sender: UITextField) {
        // æ–‡æœ¬æ¡†å†…å®¹å˜åŒ–å¤„ç†
        validateInput()
    }
    
    private func handleSubmit() {
        guard let name = nameTextField.text, !name.isEmpty else {
            showAlert(message: "è¯·è¾“å…¥å§“å")
            return
        }
        
        titleLabel.text = "æ¬¢è¿Ž, \(name)!"
    }
    
    private func validateInput() {
        let isValid = !(nameTextField.text?.isEmpty ?? true)
        submitButton.isEnabled = isValid
        submitButton.alpha = isValid ? 1.0 : 0.5
    }
    
    private func showAlert(message: String) {
        let alert = UIAlertController(title: "æç¤º", message: message, preferredStyle: .alert)
        alert.addAction(UIAlertAction(title: "ç¡®å®š", style: .default))
        present(alert, animated: true)
    }
}
```

## ðŸ“± Storyboard ä½¿ç”¨æŒ‡å—

### Storyboard æ ¸å¿ƒæ¦‚å¿µ

```swift
// Storyboard ç»„æˆå…ƒç´ :
/*
Storyboard ç»“æž„:
â”œâ”€â”€ Scene (åœºæ™¯)
â”‚   â”œâ”€â”€ View Controller (è§†å›¾æŽ§åˆ¶å™¨)
â”‚   â”œâ”€â”€ Views (è§†å›¾)
â”‚   â””â”€â”€ Constraints (çº¦æŸ)
â”œâ”€â”€ Segue (è½¬åœº)
â”‚   â”œâ”€â”€ Show (Push)
â”‚   â”œâ”€â”€ Show Detail (Replace)
â”‚   â”œâ”€â”€ Present Modally (Modal)
â”‚   â””â”€â”€ Present as Popover (iPad)
â””â”€â”€ Exit (é€€å‡º)
*/
```

### åˆ›å»ºå’Œç®¡ç†åœºæ™¯

#### 1. æ·»åŠ æ–°çš„è§†å›¾æŽ§åˆ¶å™¨

```swift
// åœ¨Storyboardä¸­æ·»åŠ æ–°åœºæ™¯çš„æ­¥éª¤:
/*
1. ä»Žå¯¹è±¡åº“æ‹–æ‹½ View Controller åˆ°ç”»å¸ƒ
2. è®¾ç½®è§†å›¾æŽ§åˆ¶å™¨çš„ Class
3. è®¾ç½® Storyboard ID (å¯é€‰ï¼Œç”¨äºŽä»£ç å®žä¾‹åŒ–)
4. é…ç½®ç•Œé¢å…ƒç´ 
5. åˆ›å»ºSegueè¿žæŽ¥
*/

// ç¨‹åºåŒ–å®žä¾‹åŒ–è§†å›¾æŽ§åˆ¶å™¨:
func navigateToDetailView() {
    let storyboard = UIStoryboard(name: "Main", bundle: nil)
    
    // é€šè¿‡ Storyboard ID å®žä¾‹åŒ–
    if let detailVC = storyboard.instantiateViewController(withIdentifier: "DetailViewController") as? DetailViewController {
        detailVC.data = someData
        navigationController?.pushViewController(detailVC, animated: true)
    }
    
    // å®žä¾‹åŒ–åˆå§‹è§†å›¾æŽ§åˆ¶å™¨
    if let initialVC = storyboard.instantiateInitialViewController() {
        present(initialVC, animated: true)
    }
}
```

#### 2. Segue çš„ä½¿ç”¨

```swift
// Segue ç±»åž‹å’Œä½¿ç”¨:

class SourceViewController: UIViewController {
    
    // å‡†å¤‡ Segue
    override func prepare(for segue: UIStoryboardSegue, sender: Any?) {
        switch segue.identifier {
        case "ShowDetailSegue":
            if let detailVC = segue.destination as? DetailViewController {
                detailVC.title = "è¯¦æƒ…é¡µé¢"
                detailVC.data = selectedData
            }
            
        case "ShowModalSegue":
            if let modalVC = segue.destination as? ModalViewController {
                modalVC.delegate = self
                modalVC.modalPresentationStyle = .pageSheet
            }
            
        default:
            break
        }
    }
    
    // ç¨‹åºåŒ–è§¦å‘ Segue
    @IBAction func manualSegueTriggered(_ sender: UIButton) {
        performSegue(withIdentifier: "ShowDetailSegue", sender: sender)
    }
    
    // æ¡ä»¶æ€§ Segue
    override func shouldPerformSegue(withIdentifier identifier: String, sender: Any?) -> Bool {
        if identifier == "ShowDetailSegue" {
            return validateDataBeforeNavigation()
        }
        return true
    }
    
    private func validateDataBeforeNavigation() -> Bool {
        // éªŒè¯æ•°æ®æ˜¯å¦æœ‰æ•ˆ
        return selectedData != nil
    }
}

// Unwind Segue (è¿”å›ž)
extension SourceViewController {
    
    @IBAction func unwindToSource(_ unwindSegue: UIStoryboardSegue) {
        // ä»Žå…¶ä»–è§†å›¾æŽ§åˆ¶å™¨è¿”å›žæ—¶çš„å¤„ç†
        if let sourceVC = unwindSegue.source as? DetailViewController {
            // å¤„ç†è¿”å›žçš„æ•°æ®
            handleReturnedData(sourceVC.modifiedData)
        }
    }
    
    private func handleReturnedData(_ data: Any?) {
        // å¤„ç†è¿”å›žçš„æ•°æ®
    }
}
```

### Storyboard æœ€ä½³å®žè·µ

```swift
// 1. æ¨¡å—åŒ– Storyboard
/*
æŽ¨èçš„ Storyboard ç»„ç»‡æ–¹å¼:
â”œâ”€â”€ Main.storyboard           // ä¸»æµç¨‹
â”œâ”€â”€ Login.storyboard          // ç™»å½•æ¨¡å—
â”œâ”€â”€ Profile.storyboard        // ç”¨æˆ·èµ„æ–™æ¨¡å—
â”œâ”€â”€ Settings.storyboard       // è®¾ç½®æ¨¡å—
â””â”€â”€ LaunchScreen.storyboard   // å¯åŠ¨å±å¹•
*/

// 2. Storyboard References
class StoryboardManager {
    
    static func instantiateLoginFlow() -> UIViewController {
        let storyboard = UIStoryboard(name: "Login", bundle: nil)
        return storyboard.instantiateInitialViewController()!
    }
    
    static func instantiateProfileViewController(for user: User) -> ProfileViewController {
        let storyboard = UIStoryboard(name: "Profile", bundle: nil)
        let profileVC = storyboard.instantiateViewController(withIdentifier: "ProfileViewController") as! ProfileViewController
        profileVC.user = user
        return profileVC
    }
}

// 3. åœºæ™¯å¤ç”¨
protocol StoryboardInstantiable {
    static var storyboardIdentifier: String { get }
    static var storyboardName: String { get }
}

extension StoryboardInstantiable where Self: UIViewController {
    static func instantiate() -> Self {
        let storyboard = UIStoryboard(name: storyboardName, bundle: nil)
        return storyboard.instantiateViewController(withIdentifier: storyboardIdentifier) as! Self
    }
}

// ä½¿ç”¨ç¤ºä¾‹
extension DetailViewController: StoryboardInstantiable {
    static let storyboardIdentifier = "DetailViewController"
    static let storyboardName = "Main"
}

// ç®€åŒ–å®žä¾‹åŒ–
let detailVC = DetailViewController.instantiate()
```

## ðŸ“ Auto Layout æ·±å…¥ç†è§£

### Auto Layout åŸºç¡€æ¦‚å¿µ

```swift
// Auto Layout æ ¸å¿ƒè¦ç´ :
/*
çº¦æŸ (Constraints):
â”œâ”€â”€ ä½ç½®çº¦æŸ
â”‚   â”œâ”€â”€ Leading/Trailing (å‰å¯¼/åŽå¯¼)
â”‚   â”œâ”€â”€ Top/Bottom (é¡¶éƒ¨/åº•éƒ¨)
â”‚   â””â”€â”€ CenterX/CenterY (ä¸­å¿ƒç‚¹)
â”œâ”€â”€ å°ºå¯¸çº¦æŸ
â”‚   â”œâ”€â”€ Width/Height (å®½åº¦/é«˜åº¦)
â”‚   â”œâ”€â”€ Aspect Ratio (å®½é«˜æ¯”)
â”‚   â””â”€â”€ Equal Widths/Heights (ç­‰å®½/ç­‰é«˜)
â””â”€â”€ å…³ç³»çº¦æŸ
    â”œâ”€â”€ Greater Than or Equal (å¤§äºŽç­‰äºŽ)
    â”œâ”€â”€ Less Than or Equal (å°äºŽç­‰äºŽ)
    â””â”€â”€ Equal (ç­‰äºŽ)
*/
```

### çº¦æŸçš„åˆ›å»ºæ–¹æ³•

#### 1. Interface Builder ä¸­åˆ›å»ºçº¦æŸ

```swift
// IB ä¸­æ·»åŠ çº¦æŸçš„æ–¹æ³•:
/*
æ–¹æ³•1: Ctrl + æ‹–æ‹½
â”œâ”€â”€ é€‰ä¸­è§†å›¾
â”œâ”€â”€ Ctrl + æ‹–æ‹½åˆ°ç›®æ ‡è§†å›¾æˆ–çˆ¶è§†å›¾
â””â”€â”€ é€‰æ‹©çº¦æŸç±»åž‹

æ–¹æ³•2: çº¦æŸæŒ‰é’®
â”œâ”€â”€ é€‰ä¸­è§†å›¾
â”œâ”€â”€ ç‚¹å‡»åº•éƒ¨çº¦æŸæŒ‰é’®
â”œâ”€â”€ Pin (å›ºå®šçº¦æŸ)
â”œâ”€â”€ Align (å¯¹é½çº¦æŸ)
â””â”€â”€ Resolve Issues (è§£å†³é—®é¢˜)

æ–¹æ³•3: å°ºå¯¸æ£€æŸ¥å™¨
â”œâ”€â”€ é€‰ä¸­è§†å›¾
â”œâ”€â”€ æ‰“å¼€ Size Inspector
â””â”€â”€ åœ¨ Constraints éƒ¨åˆ†æ‰‹åŠ¨é…ç½®
*/

// å¸¸è§çº¦æŸé…ç½®ç¤ºä¾‹:
/*
å±…ä¸­æ˜¾ç¤º:
â”œâ”€â”€ Center X to Superview
â””â”€â”€ Center Y to Superview

å¡«æ»¡çˆ¶è§†å›¾:
â”œâ”€â”€ Leading = Superview.Leading + 0
â”œâ”€â”€ Trailing = Superview.Trailing + 0
â”œâ”€â”€ Top = Superview.Top + 0
â””â”€â”€ Bottom = Superview.Bottom + 0

å›ºå®šå°ºå¯¸:
â”œâ”€â”€ Width = 200
â””â”€â”€ Height = 100

ç›¸å¯¹å¸ƒå±€:
â”œâ”€â”€ Top = Superview.Top + 20
â”œâ”€â”€ Leading = Superview.Leading + 16
â”œâ”€â”€ Trailing = Superview.Trailing - 16
â””â”€â”€ Height = 44
*/
```

#### 2. ç¨‹åºåŒ–åˆ›å»ºçº¦æŸ

```swift
// ä½¿ç”¨ NSLayoutConstraint åˆ›å»ºçº¦æŸ
class ProgrammaticLayoutViewController: UIViewController {
    
    private let titleLabel = UILabel()
    private let descriptionLabel = UILabel()
    private let actionButton = UIButton(type: .system)
    
    override func viewDidLoad() {
        super.viewDidLoad()
        setupViews()
        setupConstraints()
    }
    
    private func setupViews() {
        view.backgroundColor = .systemBackground
        
        // é…ç½® titleLabel
        titleLabel.text = "æ¬¢è¿Žä½¿ç”¨åº”ç”¨"
        titleLabel.font = .systemFont(ofSize: 24, weight: .bold)
        titleLabel.textAlignment = .center
        titleLabel.translatesAutoresizingMaskIntoConstraints = false
        
        // é…ç½® descriptionLabel
        descriptionLabel.text = "è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨ç¨‹åºåŒ–çº¦æŸåˆ›å»ºçš„ç•Œé¢ç¤ºä¾‹"
        descriptionLabel.font = .systemFont(ofSize: 16)
        descriptionLabel.textAlignment = .center
        descriptionLabel.numberOfLines = 0
        descriptionLabel.translatesAutoresizingMaskIntoConstraints = false
        
        // é…ç½® actionButton
        actionButton.setTitle("å¼€å§‹ä½¿ç”¨", for: .normal)
        actionButton.backgroundColor = .systemBlue
        actionButton.setTitleColor(.white, for: .normal)
        actionButton.layer.cornerRadius = 8
        actionButton.translatesAutoresizingMaskIntoConstraints = false
        
        // æ·»åŠ åˆ°è§†å›¾å±‚æ¬¡
        view.addSubview(titleLabel)
        view.addSubview(descriptionLabel)
        view.addSubview(actionButton)
    }
    
    private func setupConstraints() {
        NSLayoutConstraint.activate([
            // titleLabel çº¦æŸ
            titleLabel.topAnchor.constraint(equalTo: view.safeAreaLayoutGuide.topAnchor, constant: 60),
            titleLabel.leadingAnchor.constraint(equalTo: view.leadingAnchor, constant: 20),
            titleLabel.trailingAnchor.constraint(equalTo: view.trailingAnchor, constant: -20),
            
            // descriptionLabel çº¦æŸ
            descriptionLabel.topAnchor.constraint(equalTo: titleLabel.bottomAnchor, constant: 30),
            descriptionLabel.leadingAnchor.constraint(equalTo: view.leadingAnchor, constant: 20),
            descriptionLabel.trailingAnchor.constraint(equalTo: view.trailingAnchor, constant: -20),
            
            // actionButton çº¦æŸ
            actionButton.topAnchor.constraint(equalTo: descriptionLabel.bottomAnchor, constant: 40),
            actionButton.centerXAnchor.constraint(equalTo: view.centerXAnchor),
            actionButton.widthAnchor.constraint(equalToConstant: 200),
            actionButton.heightAnchor.constraint(equalToConstant: 44)
        ])
    }
}

// ä½¿ç”¨ Visual Format Language (VFL)
extension ProgrammaticLayoutViewController {
    
    private func setupConstraintsWithVFL() {
        let views = [
            "titleLabel": titleLabel,
            "descriptionLabel": descriptionLabel,
            "actionButton": actionButton
        ]
        
        let metrics = [
            "margin": 20,
            "spacing": 30,
            "buttonWidth": 200,
            "buttonHeight": 44
        ]
        
        // æ°´å¹³çº¦æŸ
        view.addConstraints(NSLayoutConstraint.constraints(
            withVisualFormat: "H:|-margin-[titleLabel]-margin-|",
            options: [],
            metrics: metrics,
            views: views
        ))
        
        view.addConstraints(NSLayoutConstraint.constraints(
            withVisualFormat: "H:|-margin-[descriptionLabel]-margin-|",
            options: [],
            metrics: metrics,
            views: views
        ))
        
        // åž‚ç›´çº¦æŸ
        view.addConstraints(NSLayoutConstraint.constraints(
            withVisualFormat: "V:|-60-[titleLabel]-spacing-[descriptionLabel]-40-[actionButton(buttonHeight)]",
            options: [],
            metrics: metrics,
            views: views
        ))
        
        // æŒ‰é’®å±…ä¸­
        actionButton.centerXAnchor.constraint(equalTo: view.centerXAnchor).isActive = true
        actionButton.widthAnchor.constraint(equalToConstant: 200).isActive = true
    }
}
```

### ä¼˜å…ˆçº§å’ŒåŽ‹ç¼©é˜»åŠ›

```swift
// çº¦æŸä¼˜å…ˆçº§ç®¡ç†
class ConstraintPriorityViewController: UIViewController {
    
    @IBOutlet weak var flexibleLabel: UILabel!
    @IBOutlet weak var fixedLabel: UILabel!
    @IBOutlet weak var containerView: UIView!
    
    override func viewDidLoad() {
        super.viewDidLoad()
        setupConstraintPriorities()
    }
    
    private func setupConstraintPriorities() {
        // è®¾ç½®å†…å®¹åŽ‹ç¼©é˜»åŠ›ä¼˜å…ˆçº§
        flexibleLabel.setContentCompressionResistancePriority(.defaultLow, for: .horizontal)
        fixedLabel.setContentCompressionResistancePriority(.defaultHigh, for: .horizontal)
        
        // è®¾ç½®å†…å®¹æ‹¥æŠ±ä¼˜å…ˆçº§
        flexibleLabel.setContentHuggingPriority(.defaultLow, for: .horizontal)
        fixedLabel.setContentHuggingPriority(.defaultHigh, for: .horizontal)
        
        // ç¨‹åºåŒ–çº¦æŸä¼˜å…ˆçº§
        let widthConstraint = flexibleLabel.widthAnchor.constraint(equalToConstant: 200)
        widthConstraint.priority = UILayoutPriority(999) // é«˜ä¼˜å…ˆçº§ä½†ä¸æ˜¯å¿…é¡»
        widthConstraint.isActive = true
        
        // æ¡ä»¶æ€§çº¦æŸ
        setupConditionalConstraints()
    }
    
    private func setupConditionalConstraints() {
        // iPhone å’Œ iPad ä¸åŒçš„çº¦æŸ
        if UIDevice.current.userInterfaceIdiom == .pad {
            // iPad çº¦æŸ
            containerView.widthAnchor.constraint(lessThanOrEqualToConstant: 600).isActive = true
            containerView.centerXAnchor.constraint(equalTo: view.centerXAnchor).isActive = true
        } else {
            // iPhone çº¦æŸ
            containerView.leadingAnchor.constraint(equalTo: view.leadingAnchor, constant: 16).isActive = true
            containerView.trailingAnchor.constraint(equalTo: view.trailingAnchor, constant: -16).isActive = true
        }
    }
}
```

## ðŸ“± Size Classes å“åº”å¼è®¾è®¡

### Size Classes åŸºç¡€

```swift
// Size Classes æ¦‚å¿µ:
/*
æ°´å¹³ Size Class:
â”œâ”€â”€ Compact (ç´§å‡‘)   // iPhone ç«–å±, iPhone Plus æ¨ªå±
â””â”€â”€ Regular (å¸¸è§„)   // iPad æ‰€æœ‰æ–¹å‘, iPhone Plus ç«–å±

åž‚ç›´ Size Class:
â”œâ”€â”€ Compact (ç´§å‡‘)   // iPhone æ¨ªå±
â””â”€â”€ Regular (å¸¸è§„)   // iPhone ç«–å±, iPad æ‰€æœ‰æ–¹å‘

ç»„åˆæƒ…å†µ:
â”œâ”€â”€ wC hR: iPhone ç«–å±
â”œâ”€â”€ wC hC: iPhone æ¨ªå±  
â”œâ”€â”€ wR hC: iPhone Plus æ¨ªå±
â””â”€â”€ wR hR: iPad æ‰€æœ‰æ–¹å‘, iPhone Plus ç«–å±
*/
```

### ä½¿ç”¨ Size Classes è¿›è¡Œé€‚é…

```swift
// Size Classes é€‚é…å®žçŽ°
class ResponsiveViewController: UIViewController {
    
    @IBOutlet weak var mainStackView: UIStackView!
    @IBOutlet weak var primaryLabel: UILabel!
    @IBOutlet weak var secondaryLabel: UILabel!
    
    // Size Classes çº¦æŸé›†åˆ
    @IBOutlet var compactConstraints: [NSLayoutConstraint]!
    @IBOutlet var regularConstraints: [NSLayoutConstraint]!
    
    override func viewDidLoad() {
        super.viewDidLoad()
        updateLayoutForCurrentSizeClass()
    }
    
    override func traitCollectionDidChange(_ previousTraitCollection: UITraitCollection?) {
        super.traitCollectionDidChange(previousTraitCollection)
        
        // æ£€æµ‹ Size Class å˜åŒ–
        if traitCollection.horizontalSizeClass != previousTraitCollection?.horizontalSizeClass ||
           traitCollection.verticalSizeClass != previousTraitCollection?.verticalSizeClass {
            updateLayoutForCurrentSizeClass()
        }
    }
    
    private func updateLayoutForCurrentSizeClass() {
        let isCompact = traitCollection.horizontalSizeClass == .compact
        
        if isCompact {
            // ç´§å‡‘å¸ƒå±€ (iPhone ç«–å±)
            NSLayoutConstraint.deactivate(regularConstraints)
            NSLayoutConstraint.activate(compactConstraints)
            
            mainStackView.axis = .vertical
            mainStackView.spacing = 16
            
            primaryLabel.font = .systemFont(ofSize: 18, weight: .semibold)
            secondaryLabel.font = .systemFont(ofSize: 14)
            
        } else {
            // å¸¸è§„å¸ƒå±€ (iPad æˆ– iPhone Plus)
            NSLayoutConstraint.deactivate(compactConstraints)
            NSLayoutConstraint.activate(regularConstraints)
            
            mainStackView.axis = .horizontal
            mainStackView.spacing = 24
            
            primaryLabel.font = .systemFont(ofSize: 24, weight: .semibold)
            secondaryLabel.font = .systemFont(ofSize: 16)
        }
        
        // æ›´æ–°å…¶ä»–UIå…ƒç´ 
        updateButtonLayout(isCompact: isCompact)
        updateImageLayout(isCompact: isCompact)
    }
    
    private func updateButtonLayout(isCompact: Bool) {
        // æ ¹æ® Size Class è°ƒæ•´æŒ‰é’®å¸ƒå±€
    }
    
    private func updateImageLayout(isCompact: Bool) {
        // æ ¹æ® Size Class è°ƒæ•´å›¾ç‰‡å¸ƒå±€
    }
}

// ä½¿ç”¨ Trait Collection è¿›è¡Œé«˜çº§é€‚é…
extension ResponsiveViewController {
    
    private func setupAdvancedResponsiveDesign() {
        // æ£€æµ‹è®¾å¤‡ç±»åž‹
        switch UIDevice.current.userInterfaceIdiom {
        case .phone:
            setupPhoneLayout()
        case .pad:
            setupPadLayout()
        default:
            setupDefaultLayout()
        }
        
        // æ£€æµ‹å±å¹•å°ºå¯¸
        let screenSize = UIScreen.main.bounds.size
        let isLargeScreen = min(screenSize.width, screenSize.height) > 414 // iPhone 6 Plus+
        
        if isLargeScreen {
            setupLargeScreenOptimizations()
        }
    }
    
    private func setupPhoneLayout() {
        // iPhone ä¸“ç”¨å¸ƒå±€
    }
    
    private func setupPadLayout() {
        // iPad ä¸“ç”¨å¸ƒå±€
    }
    
    private func setupDefaultLayout() {
        // é»˜è®¤å¸ƒå±€
    }
    
    private func setupLargeScreenOptimizations() {
        // å¤§å±å¹•ä¼˜åŒ–
    }
}
```

## ðŸ“š Stack View é«˜æ•ˆå¸ƒå±€

### Stack View åŸºç¡€ä½¿ç”¨

```swift
// Stack View ä¼˜åŠ¿å’Œä½¿ç”¨åœºæ™¯
class StackViewViewController: UIViewController {
    
    private let mainStackView = UIStackView()
    private let headerStackView = UIStackView()
    private let contentStackView = UIStackView()
    private let footerStackView = UIStackView()
    
    override func viewDidLoad() {
        super.viewDidLoad()
        setupStackViews()
        populateContent()
    }
    
    private func setupStackViews() {
        view.backgroundColor = .systemBackground
        
        // ä¸»åž‚ç›´ Stack View
        mainStackView.axis = .vertical
        mainStackView.distribution = .fill
        mainStackView.alignment = .fill
        mainStackView.spacing = 20
        mainStackView.translatesAutoresizingMaskIntoConstraints = false
        
        // å¤´éƒ¨æ°´å¹³ Stack View
        headerStackView.axis = .horizontal
        headerStackView.distribution = .fillEqually
        headerStackView.alignment = .center
        headerStackView.spacing = 16
        
        // å†…å®¹åž‚ç›´ Stack View
        contentStackView.axis = .vertical
        contentStackView.distribution = .fill
        contentStackView.alignment = .fill
        contentStackView.spacing = 12
        
        // åº•éƒ¨æ°´å¹³ Stack View
        footerStackView.axis = .horizontal
        footerStackView.distribution = .fillProportionally
        footerStackView.alignment = .center
        footerStackView.spacing = 12
        
        // æ·»åŠ åˆ°è§†å›¾å±‚æ¬¡
        view.addSubview(mainStackView)
        mainStackView.addArrangedSubview(headerStackView)
        mainStackView.addArrangedSubview(contentStackView)
        mainStackView.addArrangedSubview(footerStackView)
        
        // è®¾ç½®çº¦æŸ
        NSLayoutConstraint.activate([
            mainStackView.topAnchor.constraint(equalTo: view.safeAreaLayoutGuide.topAnchor, constant: 20),
            mainStackView.leadingAnchor.constraint(equalTo: view.leadingAnchor, constant: 16),
            mainStackView.trailingAnchor.constraint(equalTo: view.trailingAnchor, constant: -16),
            mainStackView.bottomAnchor.constraint(lessThanOrEqualTo: view.safeAreaLayoutGuide.bottomAnchor, constant: -20)
        ])
    }
    
    private func populateContent() {
        // æ·»åŠ å¤´éƒ¨å†…å®¹
        let titleLabel = createLabel(text: "æ ‡é¢˜", font: .systemFont(ofSize: 24, weight: .bold))
        let subtitleLabel = createLabel(text: "å‰¯æ ‡é¢˜", font: .systemFont(ofSize: 16, weight: .medium))
        
        headerStackView.addArrangedSubview(titleLabel)
        headerStackView.addArrangedSubview(subtitleLabel)
        
        // æ·»åŠ å†…å®¹
        for i in 1...5 {
            let contentLabel = createLabel(
                text: "å†…å®¹é¡¹ç›® \(i)",
                font: .systemFont(ofSize: 14)
            )
            contentStackView.addArrangedSubview(contentLabel)
        }
        
        // æ·»åŠ åº•éƒ¨æŒ‰é’®
        let primaryButton = createButton(title: "ä¸»è¦æ“ä½œ", style: .filled)
        let secondaryButton = createButton(title: "æ¬¡è¦æ“ä½œ", style: .bordered)
        
        footerStackView.addArrangedSubview(primaryButton)
        footerStackView.addArrangedSubview(secondaryButton)
    }
    
    // MARK: - Helper Methods
    
    private func createLabel(text: String, font: UIFont) -> UILabel {
        let label = UILabel()
        label.text = text
        label.font = font
        label.textAlignment = .center
        label.numberOfLines = 0
        return label
    }
    
    private func createButton(title: String, style: ButtonStyle) -> UIButton {
        let button = UIButton(type: .system)
        button.setTitle(title, for: .normal)
        button.titleLabel?.font = .systemFont(ofSize: 16, weight: .medium)
        
        switch style {
        case .filled:
            button.backgroundColor = .systemBlue
            button.setTitleColor(.white, for: .normal)
        case .bordered:
            button.backgroundColor = .clear
            button.setTitleColor(.systemBlue, for: .normal)
            button.layer.borderWidth = 1
            button.layer.borderColor = UIColor.systemBlue.cgColor
        }
        
        button.layer.cornerRadius = 8
        button.heightAnchor.constraint(equalToConstant: 44).isActive = true
        
        return button
    }
    
    enum ButtonStyle {
        case filled
        case bordered
    }
}

// åŠ¨æ€ Stack View ç®¡ç†
extension StackViewViewController {
    
    private func addDynamicContent() {
        let newLabel = createLabel(text: "åŠ¨æ€æ·»åŠ çš„å†…å®¹", font: .systemFont(ofSize: 14))
        
        // æ·»åŠ åŠ¨ç”»
        newLabel.alpha = 0
        contentStackView.addArrangedSubview(newLabel)
        
        UIView.animate(withDuration: 0.3) {
            newLabel.alpha = 1
            self.view.layoutIfNeeded()
        }
    }
    
    private func removeDynamicContent() {
        guard let lastView = contentStackView.arrangedSubviews.last else { return }
        
        UIView.animate(withDuration: 0.3, animations: {
            lastView.alpha = 0
            lastView.isHidden = true
        }) { _ in
            self.contentStackView.removeArrangedSubview(lastView)
            lastView.removeFromSuperview()
        }
    }
}
```

## ðŸŒ“ åŠ¨æ€å­—ä½“å’Œæ— éšœç¢è®¾è®¡

### åŠ¨æ€å­—ä½“æ”¯æŒ

```swift
// åŠ¨æ€å­—ä½“é€‚é…
class AccessibilityViewController: UIViewController {
    
    @IBOutlet weak var headlineLabel: UILabel!
    @IBOutlet weak var bodyLabel: UILabel!
    @IBOutlet weak var captionLabel: UILabel!
    
    override func viewDidLoad() {
        super.viewDidLoad()
        setupDynamicType()
        registerForNotifications()
    }
    
    deinit {
        NotificationCenter.default.removeObserver(self)
    }
    
    private func setupDynamicType() {
        // è®¾ç½®åŠ¨æ€å­—ä½“
        headlineLabel.font = UIFont.preferredFont(forTextStyle: .headline)
        headlineLabel.adjustsFontForContentSizeCategory = true
        
        bodyLabel.font = UIFont.preferredFont(forTextStyle: .body)
        bodyLabel.adjustsFontForContentSizeCategory = true
        bodyLabel.numberOfLines = 0 // æ”¯æŒå¤šè¡Œæ˜¾ç¤º
        
        captionLabel.font = UIFont.preferredFont(forTextStyle: .caption1)
        captionLabel.adjustsFontForContentSizeCategory = true
        
        // è®¾ç½®æœ€å¤§å’Œæœ€å°å­—ä½“å°ºå¯¸
        headlineLabel.maximumContentSizeCategory = .accessibilityExtraExtraExtraLarge
        headlineLabel.minimumContentSizeCategory = .small
    }
    
    private func registerForNotifications() {
        NotificationCenter.default.addObserver(
            self,
            selector: #selector(contentSizeCategoryDidChange),
            name: UIContentSizeCategory.didChangeNotification,
            object: nil
        )
    }
    
    @objc private func contentSizeCategoryDidChange() {
        // å­—ä½“å¤§å°æ”¹å˜æ—¶çš„å¤„ç†
        updateLayoutForNewFontSizes()
    }
    
    private func updateLayoutForNewFontSizes() {
        // é‡æ–°è®¡ç®—å¸ƒå±€
        view.setNeedsLayout()
        view.layoutIfNeeded()
        
        // å¦‚æžœæ˜¯ Table View æˆ– Collection Viewï¼Œé‡æ–°åŠ è½½
        // tableView.reloadData()
    }
}

// è‡ªå®šä¹‰å­—ä½“çš„åŠ¨æ€é€‚é…
extension AccessibilityViewController {
    
    private func setupCustomDynamicFont() {
        // åˆ›å»ºè‡ªå®šä¹‰å­—ä½“çš„åŠ¨æ€ç‰ˆæœ¬
        let customFont = UIFont(name: "YourCustomFont", size: 17) ?? UIFont.systemFont(ofSize: 17)
        let dynamicFont = UIFontMetrics(forTextStyle: .body).scaledFont(for: customFont)
        
        headlineLabel.font = dynamicFont
    }
}
```

### æ— éšœç¢æ”¯æŒ

```swift
// æ— éšœç¢åŠŸèƒ½å®žçŽ°
extension AccessibilityViewController {
    
    private func setupAccessibility() {
        // è®¾ç½®å¯è®¿é—®æ€§æ ‡ç­¾
        headlineLabel.accessibilityLabel = "ä¸»æ ‡é¢˜"
        headlineLabel.accessibilityTraits = .header
        
        bodyLabel.accessibilityLabel = "æ­£æ–‡å†…å®¹"
        bodyLabel.accessibilityHint = "è¿™é‡Œæ˜¾ç¤ºè¯¦ç»†çš„æ–‡ç« å†…å®¹"
        
        // è®¾ç½®å¯è®¿é—®æ€§å…ƒç´ ç»„åˆ
        let containerView = UIView()
        containerView.isAccessibilityElement = true
        containerView.accessibilityLabel = "æ–‡ç« æ‘˜è¦"
        containerView.accessibilityValue = "\(headlineLabel.text ?? ""), \(bodyLabel.text ?? "")"
        
        // è‡ªå®šä¹‰å¯è®¿é—®æ€§æ“ä½œ
        let shareAction = UIAccessibilityCustomAction(
            name: "åˆ†äº«æ–‡ç« ",
            target: self,
            selector: #selector(shareArticle)
        )
        
        let bookmarkAction = UIAccessibilityCustomAction(
            name: "æ·»åŠ ä¹¦ç­¾",
            target: self,
            selector: #selector(bookmarkArticle)
        )
        
        containerView.accessibilityCustomActions = [shareAction, bookmarkAction]
    }
    
    @objc private func shareArticle() -> Bool {
        // å®žçŽ°åˆ†äº«åŠŸèƒ½
        return true
    }
    
    @objc private func bookmarkArticle() -> Bool {
        // å®žçŽ°ä¹¦ç­¾åŠŸèƒ½
        return true
    }
    
    // æ”¯æŒè¯­éŸ³æŽ§åˆ¶
    private func setupVoiceControlSupport() {
        headlineLabel.accessibilityUserInputLabels = ["æ ‡é¢˜", "ä¸»æ ‡é¢˜", "æ–‡ç« æ ‡é¢˜"]
        
        // ä¸ºæŒ‰é’®è®¾ç½®è¯­éŸ³æ ‡è¯†
        let actionButton = UIButton(type: .system)
        actionButton.accessibilityUserInputLabels = ["æäº¤", "ç¡®è®¤", "å‘é€"]
    }
}
```

## ðŸŽ¯ å®žè·µç»ƒä¹ 

### ç»ƒä¹ 1ï¼šå“åº”å¼å¡ç‰‡å¸ƒå±€

```swift
// åˆ›å»ºä¸€ä¸ªå“åº”å¼çš„å¡ç‰‡å¸ƒå±€
class ResponsiveCardViewController: UIViewController {
    
    private let scrollView = UIScrollView()
    private let stackView = UIStackView()
    
    override func viewDidLoad() {
        super.viewDidLoad()
        setupScrollView()
        createCards()
    }
    
    override func traitCollectionDidChange(_ previousTraitCollection: UITraitCollection?) {
        super.traitCollectionDidChange(previousTraitCollection)
        updateLayoutForTraitCollection()
    }
    
    private func setupScrollView() {
        view.backgroundColor = .systemGroupedBackground
        
        scrollView.translatesAutoresizingMaskIntoConstraints = false
        stackView.translatesAutoresizingMaskIntoConstraints = false
        
        stackView.axis = .vertical
        stackView.spacing = 16
        stackView.distribution = .fill
        
        scrollView.addSubview(stackView)
        view.addSubview(scrollView)
        
        NSLayoutConstraint.activate([
            scrollView.topAnchor.constraint(equalTo: view.safeAreaLayoutGuide.topAnchor),
            scrollView.leadingAnchor.constraint(equalTo: view.leadingAnchor),
            scrollView.trailingAnchor.constraint(equalTo: view.trailingAnchor),
            scrollView.bottomAnchor.constraint(equalTo: view.bottomAnchor),
            
            stackView.topAnchor.constraint(equalTo: scrollView.topAnchor, constant: 16),
            stackView.leadingAnchor.constraint(equalTo: scrollView.leadingAnchor, constant: 16),
            stackView.trailingAnchor.constraint(equalTo: scrollView.trailingAnchor, constant: -16),
            stackView.bottomAnchor.constraint(equalTo: scrollView.bottomAnchor, constant: -16),
            stackView.widthAnchor.constraint(equalTo: scrollView.widthAnchor, constant: -32)
        ])
    }
    
    private func createCards() {
        let cardData = [
            ("æ–°é—»", "ä»Šæ—¥å¤´æ¡æ–°é—»", "ðŸ“°"),
            ("å¤©æ°”", "ä»Šå¤©å¤©æ°”æ™´æœ—", "â˜€ï¸"),
            ("æ—¥åŽ†", "ä»Šæ—¥æœ‰3ä¸ªæ—¥ç¨‹", "ðŸ“…"),
            ("æ¶ˆæ¯", "5æ¡æœªè¯»æ¶ˆæ¯", "ðŸ’¬"),
            ("è®¾ç½®", "åº”ç”¨è®¾ç½®", "âš™ï¸")
        ]
        
        for (title, subtitle, icon) in cardData {
            let card = createCardView(title: title, subtitle: subtitle, icon: icon)
            stackView.addArrangedSubview(card)
        }
    }
    
    private func createCardView(title: String, subtitle: String, icon: String) -> UIView {
        let cardView = UIView()
        cardView.backgroundColor = .systemBackground
        cardView.layer.cornerRadius = 12
        cardView.layer.shadowColor = UIColor.label.cgColor
        cardView.layer.shadowOpacity = 0.1
        cardView.layer.shadowOffset = CGSize(width: 0, height: 2)
        cardView.layer.shadowRadius = 4
        
        let iconLabel = UILabel()
        iconLabel.text = icon
        iconLabel.font = .systemFont(ofSize: 24)
        iconLabel.textAlignment = .center
        
        let titleLabel = UILabel()
        titleLabel.text = title
        titleLabel.font = UIFont.preferredFont(forTextStyle: .headline)
        titleLabel.adjustsFontForContentSizeCategory = true
        
        let subtitleLabel = UILabel()
        subtitleLabel.text = subtitle
        subtitleLabel.font = UIFont.preferredFont(forTextStyle: .subheadline)
        subtitleLabel.textColor = .secondaryLabel
        subtitleLabel.adjustsFontForContentSizeCategory = true
        subtitleLabel.numberOfLines = 0
        
        let contentStackView = UIStackView(arrangedSubviews: [titleLabel, subtitleLabel])
        contentStackView.axis = .vertical
        contentStackView.spacing = 4
        
        let mainStackView = UIStackView(arrangedSubviews: [iconLabel, contentStackView])
        mainStackView.axis = .horizontal
        mainStackView.spacing = 16
        mainStackView.alignment = .center
        mainStackView.translatesAutoresizingMaskIntoConstraints = false
        
        cardView.addSubview(mainStackView)
        
        NSLayoutConstraint.activate([
            mainStackView.topAnchor.constraint(equalTo: cardView.topAnchor, constant: 16),
            mainStackView.leadingAnchor.constraint(equalTo: cardView.leadingAnchor, constant: 16),
            mainStackView.trailingAnchor.constraint(equalTo: cardView.trailingAnchor, constant: -16),
            mainStackView.bottomAnchor.constraint(equalTo: cardView.bottomAnchor, constant: -16),
            
            cardView.heightAnchor.constraint(greaterThanOrEqualToConstant: 80),
            iconLabel.widthAnchor.constraint(equalToConstant: 40)
        ])
        
        return cardView
    }
    
    private func updateLayoutForTraitCollection() {
        let isCompact = traitCollection.horizontalSizeClass == .compact
        stackView.spacing = isCompact ? 12 : 16
        
        // åœ¨ iPad ä¸Šä½¿ç”¨ä¸åŒçš„è¾¹è·
        if !isCompact {
            let maxWidth: CGFloat = 600
            stackView.widthAnchor.constraint(lessThanOrEqualToConstant: maxWidth).isActive = true
        }
    }
}
```

### ç»ƒä¹ 2ï¼šè‡ªé€‚åº”è¡¨å•å¸ƒå±€

```swift
// åˆ›å»ºä¸€ä¸ªè‡ªé€‚åº”çš„è¡¨å•ç•Œé¢
class AdaptiveFormViewController: UIViewController {
    
    private let scrollView = UIScrollView()
    private let formStackView = UIStackView()
    private var textFields: [UITextField] = []
    
    override func viewDidLoad() {
        super.viewDidLoad()
        setupForm()
        setupKeyboardHandling()
    }
    
    deinit {
        NotificationCenter.default.removeObserver(self)
    }
    
    private func setupForm() {
        view.backgroundColor = .systemGroupedBackground
        title = "ç”¨æˆ·æ³¨å†Œ"
        
        // è®¾ç½®å¯¼èˆªæ æŒ‰é’®
        navigationItem.rightBarButtonItem = UIBarButtonItem(
            title: "æäº¤",
            style: .done,
            target: self,
            action: #selector(submitForm)
        )
        
        setupScrollView()
        createFormFields()
    }
    
    private func setupScrollView() {
        scrollView.translatesAutoresizingMaskIntoConstraints = false
        formStackView.translatesAutoresizingMaskIntoConstraints = false
        
        formStackView.axis = .vertical
        formStackView.spacing = 20
        formStackView.distribution = .fill
        
        scrollView.addSubview(formStackView)
        view.addSubview(scrollView)
        
        NSLayoutConstraint.activate([
            scrollView.topAnchor.constraint(equalTo: view.safeAreaLayoutGuide.topAnchor),
            scrollView.leadingAnchor.constraint(equalTo: view.leadingAnchor),
            scrollView.trailingAnchor.constraint(equalTo: view.trailingAnchor),
            scrollView.bottomAnchor.constraint(equalTo: view.bottomAnchor),
            
            formStackView.topAnchor.constraint(equalTo: scrollView.topAnchor, constant: 20),
            formStackView.leadingAnchor.constraint(equalTo: scrollView.leadingAnchor, constant: 20),
            formStackView.trailingAnchor.constraint(equalTo: scrollView.trailingAnchor, constant: -20),
            formStackView.bottomAnchor.constraint(equalTo: scrollView.bottomAnchor, constant: -20),
            formStackView.widthAnchor.constraint(equalTo: scrollView.widthAnchor, constant: -40)
        ])
    }
    
    private func createFormFields() {
        let fieldConfigs = [
            ("å§“å", "è¯·è¾“å…¥æ‚¨çš„å§“å", UIKeyboardType.default, UITextContentType.name),
            ("é‚®ç®±", "è¯·è¾“å…¥é‚®ç®±åœ°å€", UIKeyboardType.emailAddress, UITextContentType.emailAddress),
            ("ç”µè¯", "è¯·è¾“å…¥æ‰‹æœºå·ç ", UIKeyboardType.phonePad, UITextContentType.telephoneNumber),
            ("å¯†ç ", "è¯·è¾“å…¥å¯†ç ", UIKeyboardType.default, UITextContentType.newPassword),
            ("ç¡®è®¤å¯†ç ", "è¯·å†æ¬¡è¾“å…¥å¯†ç ", UIKeyboardType.default, UITextContentType.newPassword)
        ]
        
        for (label, placeholder, keyboardType, contentType) in fieldConfigs {
            let fieldContainer = createFormField(
                label: label,
                placeholder: placeholder,
                keyboardType: keyboardType,
                contentType: contentType
            )
            formStackView.addArrangedSubview(fieldContainer)
        }
        
        // æ·»åŠ æäº¤æŒ‰é’®
        let submitButton = createSubmitButton()
        formStackView.addArrangedSubview(submitButton)
    }
    
    private func createFormField(label: String, placeholder: String, 
                                keyboardType: UIKeyboardType, 
                                contentType: UITextContentType) -> UIView {
        let container = UIView()
        
        let labelView = UILabel()
        labelView.text = label
        labelView.font = UIFont.preferredFont(forTextStyle: .headline)
        labelView.adjustsFontForContentSizeCategory = true
        
        let textField = UITextField()
        textField.placeholder = placeholder
        textField.borderStyle = .roundedRect
        textField.keyboardType = keyboardType
        textField.textContentType = contentType
        textField.delegate = self
        
        // å¯†ç å­—æ®µç‰¹æ®Šå¤„ç†
        if contentType == .newPassword {
            textField.isSecureTextEntry = true
        }
        
        textFields.append(textField)
        
        let stackView = UIStackView(arrangedSubviews: [labelView, textField])
        stackView.axis = .vertical
        stackView.spacing = 8
        stackView.translatesAutoresizingMaskIntoConstraints = false
        
        container.addSubview(stackView)
        
        NSLayoutConstraint.activate([
            stackView.topAnchor.constraint(equalTo: container.topAnchor),
            stackView.leadingAnchor.constraint(equalTo: container.leadingAnchor),
            stackView.trailingAnchor.constraint(equalTo: container.trailingAnchor),
            stackView.bottomAnchor.constraint(equalTo: container.bottomAnchor),
            
            textField.heightAnchor.constraint(equalToConstant: 44)
        ])
        
        return container
    }
    
    private func createSubmitButton() -> UIButton {
        let button = UIButton(type: .system)
        button.setTitle("æ³¨å†Œ", for: .normal)
        button.backgroundColor = .systemBlue
        button.setTitleColor(.white, for: .normal)
        button.titleLabel?.font = UIFont.preferredFont(forTextStyle: .headline)
        button.layer.cornerRadius = 8
        button.addTarget(self, action: #selector(submitForm), for: .touchUpInside)
        
        button.heightAnchor.constraint(equalToConstant: 50).isActive = true
        
        return button
    }
    
    @objc private func submitForm() {
        // éªŒè¯è¡¨å•
        guard validateForm() else { return }
        
        // æäº¤è¡¨å•æ•°æ®
        let formData = textFields.compactMap { $0.text }
        print("æäº¤è¡¨å•æ•°æ®: \(formData)")
        
        // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
        showAlert(title: "æˆåŠŸ", message: "æ³¨å†ŒæˆåŠŸï¼")
    }
    
    private func validateForm() -> Bool {
        for (index, textField) in textFields.enumerated() {
            if textField.text?.isEmpty ?? true {
                showAlert(title: "é”™è¯¯", message: "è¯·å¡«å†™æ‰€æœ‰å¿…å¡«å­—æ®µ")
                textField.becomeFirstResponder()
                return false
            }
            
            // éªŒè¯å¯†ç åŒ¹é…
            if index == 4 { // ç¡®è®¤å¯†ç å­—æ®µ
                if textField.text != textFields[3].text {
                    showAlert(title: "é”™è¯¯", message: "ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸åŒ¹é…")
                    return false
                }
            }
        }
        return true
    }
    
    private func showAlert(title: String, message: String) {
        let alert = UIAlertController(title: title, message: message, preferredStyle: .alert)
        alert.addAction(UIAlertAction(title: "ç¡®å®š", style: .default))
        present(alert, animated: true)
    }
}

// MARK: - é”®ç›˜å¤„ç†
extension AdaptiveFormViewController {
    
    private func setupKeyboardHandling() {
        NotificationCenter.default.addObserver(
            self,
            selector: #selector(keyboardWillShow),
            name: UIResponder.keyboardWillShowNotification,
            object: nil
        )
        
        NotificationCenter.default.addObserver(
            self,
            selector: #selector(keyboardWillHide),
            name: UIResponder.keyboardWillHideNotification,
            object: nil
        )
    }
    
    @objc private func keyboardWillShow(_ notification: Notification) {
        guard let keyboardFrame = notification.userInfo?[UIResponder.keyboardFrameEndUserInfoKey] as? CGRect else { return }
        
        let keyboardHeight = keyboardFrame.height
        scrollView.contentInset.bottom = keyboardHeight
        scrollView.scrollIndicatorInsets.bottom = keyboardHeight
    }
    
    @objc private func keyboardWillHide(_ notification: Notification) {
        scrollView.contentInset.bottom = 0
        scrollView.scrollIndicatorInsets.bottom = 0
    }
}

// MARK: - UITextFieldDelegate
extension AdaptiveFormViewController: UITextFieldDelegate {
    
    func textFieldShouldReturn(_ textField: UITextField) -> Bool {
        if let currentIndex = textFields.firstIndex(of: textField) {
            let nextIndex = currentIndex + 1
            if nextIndex < textFields.count {
                textFields[nextIndex].becomeFirstResponder()
            } else {
                textField.resignFirstResponder()
                submitForm()
            }
        }
        return true
    }
}
```

## ðŸ“ å°ç»“

### é‡ç‚¹å›žé¡¾

1. **Interface Builder**: å¯è§†åŒ–ç•Œé¢è®¾è®¡å·¥å…·çš„ä½¿ç”¨å’Œæœ€ä½³å®žè·µ
2. **Storyboard**: åœºæ™¯ç®¡ç†ã€Segueä½¿ç”¨å’Œæ¨¡å—åŒ–è®¾è®¡
3. **Auto Layout**: çº¦æŸç³»ç»Ÿã€ä¼˜å…ˆçº§å’Œç¨‹åºåŒ–å¸ƒå±€
4. **Size Classes**: å“åº”å¼è®¾è®¡å’Œå¤šè®¾å¤‡é€‚é…
5. **Stack View**: é«˜æ•ˆçš„è‡ªé€‚åº”å¸ƒå±€è§£å†³æ–¹æ¡ˆ
6. **åŠ¨æ€å­—ä½“**: æ— éšœç¢è®¾è®¡å’Œç”¨æˆ·å‹å¥½æ€§

### æœ€ä½³å®žè·µ

- **æ¨¡å—åŒ–Storyboard**: é¿å…å•ä¸ªStoryboardè¿‡å¤§
- **ä¼˜å…ˆä½¿ç”¨Stack View**: å‡å°‘çº¦æŸå¤æ‚æ€§
- **æ”¯æŒåŠ¨æ€å­—ä½“**: æé«˜å¯è®¿é—®æ€§
- **å“åº”å¼è®¾è®¡**: é€‚é…ä¸åŒè®¾å¤‡å’Œæ–¹å‘
- **çº¦æŸä¼˜å…ˆçº§**: åˆç†è®¾ç½®ä»¥é¿å…å†²çª
- **æ€§èƒ½ä¼˜åŒ–**: é¿å…è¿‡åº¦å¤æ‚çš„çº¦æŸå…³ç³»

### å¸¸è§é™·é˜±

- çº¦æŸå†²çªå¯¼è‡´çš„å¸ƒå±€é—®é¢˜
- å¿˜è®°è®¾ç½®translatesAutoresizingMaskIntoConstraints
- è¿‡åº¦ä¾èµ–å›ºå®šå°ºå¯¸è€Œå¿½è§†åŠ¨æ€é€‚é…
- Storyboardè¿‡äºŽå¤æ‚éš¾ä»¥ç»´æŠ¤
- å¿½è§†æ— éšœç¢è®¾è®¡è¦æ±‚

## ðŸ”„ ä¸‹ä¸€æ­¥

æŽŒæ¡ç•Œé¢è®¾è®¡åŸºç¡€åŽï¼ŒæŽ¥ä¸‹æ¥å­¦ä¹ ï¼š

- **[è§†å›¾ä¸Žè§†å›¾æŽ§åˆ¶å™¨](./04-è§†å›¾ä¸Žè§†å›¾æŽ§åˆ¶å™¨.md)**: æ·±å…¥ç†è§£è§†å›¾ç³»ç»Ÿå’ŒMVCæ¨¡å¼
- **[ç”¨æˆ·ç•Œé¢ç»„ä»¶](./05-ç”¨æˆ·ç•Œé¢ç»„ä»¶.md)**: å­¦ä¹ å„ç§UIæŽ§ä»¶çš„ä½¿ç”¨

**ä½ å·²ç»æŽŒæ¡äº†iOSç•Œé¢è®¾è®¡çš„æ ¸å¿ƒæŠ€èƒ½ï¼** ðŸŽ¨ 