<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CanvasåŠ¨ç”»åŸºç¡€ç¤ºä¾‹</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .example-section {
            margin-bottom: 40px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .example-title {
            font-size: 18px;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 15px;
        }
        .description {
            background-color: #f8f9fa;
            padding: 15px;
            border-left: 4px solid #3498db;
            margin-bottom: 20px;
            border-radius: 0 5px 5px 0;
        }
        canvas {
            border: 2px solid #34495e;
            margin: 10px 0;
            display: block;
            background: white;
        }
        button {
            background: #3498db;
            color: white;
            border: none;
            padding: 8px 16px;
            margin: 5px;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover {
            background: #2980b9;
        }
        button.active {
            background: #e74c3c;
        }
        .fps-counter {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 5px 10px;
            border-radius: 3px;
            font-family: monospace;
            font-size: 12px;
        }
        .relative {
            position: relative;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¬ CanvasåŠ¨ç”»åŸºç¡€ç¤ºä¾‹</h1>
        
        <!-- ç¤ºä¾‹1: åŸºæœ¬åŠ¨ç”»å¾ªç¯ -->
        <div class="example-section">
            <div class="example-title">1. åŸºæœ¬åŠ¨ç”»å¾ªç¯</div>
            <div class="description">
                <strong>åŠŸèƒ½è¯´æ˜ï¼š</strong>æ¼”ç¤ºrequestAnimationFrameçš„ä½¿ç”¨å’ŒåŸºæœ¬åŠ¨ç”»å¾ªç¯ç»“æ„ã€‚<br>
                <strong>æŠ€æœ¯è¦ç‚¹ï¼š</strong>requestAnimationFrameã€åŠ¨ç”»å¾ªç¯ã€FPSç›‘æ§
            </div>
            
            <div class="relative">
                <canvas id="basicAnimationCanvas" width="600" height="200"></canvas>
                <div class="fps-counter" id="fpsCounter1">FPS: 0</div>
            </div>
            
            <div>
                <button id="startBasicBtn" onclick="toggleBasicAnimation()">â–¶ï¸ å¼€å§‹åŠ¨ç”»</button>
                <button onclick="resetBasicAnimation()">ğŸ”„ é‡ç½®åŠ¨ç”»</button>
            </div>
        </div>

        <!-- ç¤ºä¾‹2: ç¼“åŠ¨å‡½æ•°æ¼”ç¤º -->
        <div class="example-section">
            <div class="example-title">2. ç¼“åŠ¨å‡½æ•°æ¼”ç¤º</div>
            <div class="description">
                <strong>åŠŸèƒ½è¯´æ˜ï¼š</strong>æ¼”ç¤ºä¸åŒçš„ç¼“åŠ¨å‡½æ•°æ•ˆæœï¼ŒåŒ…æ‹¬çº¿æ€§ã€äºŒæ¬¡ã€ä¸‰æ¬¡ã€æ­£å¼¦ç­‰ã€‚<br>
                <strong>æŠ€æœ¯è¦ç‚¹ï¼š</strong>ç¼“åŠ¨å‡½æ•°ã€æ•°å­¦æ›²çº¿ã€åŠ¨ç”»æ’å€¼
            </div>
            
            <canvas id="easingCanvas" width="600" height="350"></canvas>
            
            <div>
                <button onclick="startEasingDemo('linear')">ğŸ“ çº¿æ€§</button>
                <button onclick="startEasingDemo('quadratic')">ğŸ“ˆ äºŒæ¬¡</button>
                <button onclick="startEasingDemo('cubic')">ğŸ“Š ä¸‰æ¬¡</button>
                <button onclick="startEasingDemo('sine')">ğŸŒŠ æ­£å¼¦</button>
                <button onclick="startEasingDemo('elastic')">ğŸ€ å¼¹æ€§</button>
                <button onclick="startEasingDemo('bounce')">âš½ åå¼¹</button>
                <button onclick="startAllEasing()">ğŸ¯ å…¨éƒ¨æ¼”ç¤º</button>
            </div>
        </div>

        <!-- ç¤ºä¾‹3: å¼¹è·³çƒåŠ¨ç”» -->
        <div class="example-section">
            <div class="example-title">3. å¼¹è·³çƒç‰©ç†åŠ¨ç”»</div>
            <div class="description">
                <strong>åŠŸèƒ½è¯´æ˜ï¼š</strong>å®ç°å…·æœ‰é‡åŠ›å’Œç¢°æ’æ£€æµ‹çš„å¼¹è·³çƒåŠ¨ç”»ã€‚<br>
                <strong>æŠ€æœ¯è¦ç‚¹ï¼š</strong>ç‰©ç†è¿åŠ¨ã€é‡åŠ›æ¨¡æ‹Ÿã€ç¢°æ’æ£€æµ‹ã€èƒ½é‡æŸå¤±
            </div>
            
            <div class="relative">
                <canvas id="ballCanvas" width="600" height="300"></canvas>
                <div class="fps-counter" id="fpsCounter2">FPS: 0</div>
            </div>
            
            <div>
                <button id="ballBtn" onclick="toggleBallAnimation()">â–¶ï¸ å¼€å§‹å¼¹è·³</button>
                <button onclick="addBall()">â• æ·»åŠ çƒ</button>
                <button onclick="resetBalls()">ğŸ”„ é‡ç½®</button>
                <button onclick="toggleTrail()">ğŸŒŸ è½¨è¿¹æ¨¡å¼</button>
            </div>
        </div>

        <!-- ç¤ºä¾‹4: æ—¶é—´ç®¡ç†å’Œå¢é‡æ—¶é—´ -->
        <div class="example-section">
            <div class="example-title">4. æ—¶é—´ç®¡ç†å’Œå¢é‡æ—¶é—´</div>
            <div class="description">
                <strong>åŠŸèƒ½è¯´æ˜ï¼š</strong>æ¼”ç¤ºåŸºäºæ—¶é—´çš„åŠ¨ç”»å’ŒdeltaTimeçš„ä½¿ç”¨ã€‚<br>
                <strong>æŠ€æœ¯è¦ç‚¹ï¼š</strong>performance.now()ã€deltaTimeã€å¸§ç‡æ— å…³åŠ¨ç”»
            </div>
            
            <canvas id="timeCanvas" width="600" height="200"></canvas>
            
            <div>
                <button onclick="startTimeBasedAnimation()">â±ï¸ æ—¶é—´åŠ¨ç”»</button>
                <button onclick="startFrameBasedAnimation()">ğŸï¸ å¸§åŠ¨ç”»</button>
                <button onclick="stopTimeAnimations()">â¹ï¸ åœæ­¢</button>
                <span style="margin-left: 20px;">å·¦ä¾§ï¼šåŸºäºæ—¶é—´ | å³ä¾§ï¼šåŸºäºå¸§æ•°</span>
            </div>
        </div>
    </div>

    <script>
        // å…¨å±€å˜é‡
        let animationStates = {
            basic: false,
            ball: false,
            time: false
        };
        
        let balls = [];
        let trailMode = false;
        
        // FPS è®¡æ•°å™¨
        class FPSCounter {
            constructor() {
                this.fps = 0;
                this.lastTime = performance.now();
                this.frameCount = 0;
                this.fpsUpdateTime = 0;
            }
            
            update() {
                const now = performance.now();
                this.frameCount++;
                this.fpsUpdateTime += now - this.lastTime;
                
                if (this.fpsUpdateTime >= 1000) {
                    this.fps = Math.round((this.frameCount * 1000) / this.fpsUpdateTime);
                    this.frameCount = 0;
                    this.fpsUpdateTime = 0;
                }
                
                this.lastTime = now;
            }
            
            getFPS() {
                return this.fps;
            }
        }
        
        const fpsCounter1 = new FPSCounter();
        const fpsCounter2 = new FPSCounter();
        
        // ç¼“åŠ¨å‡½æ•°
        const easingFunctions = {
            linear: t => t,
            quadratic: t => t * t,
            cubic: t => t * t * t,
            sine: t => 1 - Math.cos(t * Math.PI / 2),
            elastic: t => {
                if (t === 0) return 0;
                if (t === 1) return 1;
                const p = 0.3;
                const s = p / 4;
                return Math.pow(2, -10 * t) * Math.sin((t - s) * (2 * Math.PI) / p) + 1;
            },
            bounce: t => {
                if (t < 1/2.75) {
                    return 7.5625 * t * t;
                } else if (t < 2/2.75) {
                    return 7.5625 * (t -= 1.5/2.75) * t + 0.75;
                } else if (t < 2.5/2.75) {
                    return 7.5625 * (t -= 2.25/2.75) * t + 0.9375;
                } else {
                    return 7.5625 * (t -= 2.625/2.75) * t + 0.984375;
                }
            }
        };
        
        // åŸºæœ¬åŠ¨ç”»
        let basicAnimationId;
        let basicX = 0;
        
        function toggleBasicAnimation() {
            const btn = document.getElementById('startBasicBtn');
            
            if (!animationStates.basic) {
                animationStates.basic = true;
                btn.textContent = 'â¸ï¸ æš‚åœåŠ¨ç”»';
                btn.classList.add('active');
                startBasicAnimationLoop();
            } else {
                animationStates.basic = false;
                btn.textContent = 'â–¶ï¸ å¼€å§‹åŠ¨ç”»';
                btn.classList.remove('active');
                if (basicAnimationId) {
                    cancelAnimationFrame(basicAnimationId);
                }
            }
        }
        
        function startBasicAnimationLoop() {
            const canvas = document.getElementById('basicAnimationCanvas');
            const ctx = canvas.getContext('2d');
            
            function animate() {
                if (!animationStates.basic) return;
                
                fpsCounter1.update();
                
                // æ¸…é™¤ç”»å¸ƒ
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // ç§»åŠ¨å¯¹è±¡
                basicX += 3;
                if (basicX > canvas.width + 50) {
                    basicX = -50;
                }
                
                // ç»˜åˆ¶ç§»åŠ¨çš„åœ†å½¢
                ctx.fillStyle = '#e74c3c';
                ctx.beginPath();
                ctx.arc(basicX, 100, 25, 0, 2 * Math.PI);
                ctx.fill();
                
                // ç»˜åˆ¶è½¨è¿¹ç‚¹
                ctx.fillStyle = 'rgba(52, 152, 219, 0.3)';
                for (let i = 1; i <= 5; i++) {
                    const trailX = basicX - i * 15;
                    if (trailX >= 0) {
                        ctx.beginPath();
                        ctx.arc(trailX, 100, 25 - i * 3, 0, 2 * Math.PI);
                        ctx.fill();
                    }
                }
                
                // æ›´æ–°FPSæ˜¾ç¤º
                document.getElementById('fpsCounter1').textContent = `FPS: ${fpsCounter1.getFPS()}`;
                
                basicAnimationId = requestAnimationFrame(animate);
            }
            
            animate();
        }
        
        function resetBasicAnimation() {
            basicX = 0;
            const canvas = document.getElementById('basicAnimationCanvas');
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }
        
        // ç¼“åŠ¨å‡½æ•°æ¼”ç¤º
        let easingAnimationId;
        
        function startEasingDemo(easingType) {
            if (easingAnimationId) {
                cancelAnimationFrame(easingAnimationId);
            }
            
            const canvas = document.getElementById('easingCanvas');
            const ctx = canvas.getContext('2d');
            const startTime = performance.now();
            const duration = 2000; // 2ç§’
            
            function animate() {
                const elapsed = performance.now() - startTime;
                const progress = Math.min(elapsed / duration, 1);
                
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // ç»˜åˆ¶è½¨é“
                ctx.strokeStyle = '#ddd';
                ctx.lineWidth = 2;
                ctx.setLineDash([5, 5]);
                ctx.beginPath();
                ctx.moveTo(50, 100);
                ctx.lineTo(550, 100);
                ctx.stroke();
                ctx.setLineDash([]);
                
                // è®¡ç®—ä½ç½®
                const easedProgress = easingFunctions[easingType](progress);
                const x = 50 + easedProgress * 500;
                
                // ç»˜åˆ¶ç§»åŠ¨çš„çƒ
                ctx.fillStyle = '#e74c3c';
                ctx.beginPath();
                ctx.arc(x, 100, 20, 0, 2 * Math.PI);
                ctx.fill();
                
                // ç»˜åˆ¶ç¼“åŠ¨æ›²çº¿
                drawEasingCurve(ctx, easingType, progress);
                
                // æ˜¾ç¤ºä¿¡æ¯
                ctx.fillStyle = '#333';
                ctx.font = '16px Arial';
                ctx.fillText(`ç¼“åŠ¨ç±»å‹: ${easingType}`, 50, 50);
                ctx.fillText(`è¿›åº¦: ${Math.round(progress * 100)}%`, 200, 50);
                ctx.fillText(`ç¼“åŠ¨å€¼: ${easedProgress.toFixed(3)}`, 350, 50);
                
                if (progress < 1) {
                    easingAnimationId = requestAnimationFrame(animate);
                }
            }
            
            animate();
        }
        
        function drawEasingCurve(ctx, easingType, currentProgress) {
            const startX = 50;
            const startY = 200;
            const width = 200;
            const height = 100;
            
            // ç»˜åˆ¶åæ ‡è½´
            ctx.strokeStyle = '#666';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(startX, startY);
            ctx.lineTo(startX + width, startY);
            ctx.moveTo(startX, startY);
            ctx.lineTo(startX, startY - height);
            ctx.stroke();
            
            // ç»˜åˆ¶ç¼“åŠ¨æ›²çº¿
            ctx.strokeStyle = '#3498db';
            ctx.lineWidth = 2;
            ctx.beginPath();
            
            for (let i = 0; i <= 100; i++) {
                const t = i / 100;
                const easedT = easingFunctions[easingType](t);
                const x = startX + t * width;
                const y = startY - easedT * height;
                
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            ctx.stroke();
            
            // æ ‡è®°å½“å‰è¿›åº¦ç‚¹
            if (currentProgress > 0) {
                const easedProgress = easingFunctions[easingType](currentProgress);
                const currentX = startX + currentProgress * width;
                const currentY = startY - easedProgress * height;
                
                ctx.fillStyle = '#e74c3c';
                ctx.beginPath();
                ctx.arc(currentX, currentY, 4, 0, 2 * Math.PI);
                ctx.fill();
            }
            
            // æ·»åŠ æ ‡ç­¾
            ctx.fillStyle = '#666';
            ctx.font = '12px Arial';
            ctx.fillText('æ—¶é—´', startX + width - 20, startY + 15);
            ctx.save();
            ctx.translate(startX - 15, startY - height / 2);
            ctx.rotate(-Math.PI / 2);
            ctx.fillText('å€¼', 0, 0);
            ctx.restore();
        }
        
        function startAllEasing() {
            const easings = Object.keys(easingFunctions);
            let index = 0;
            
            function nextEasing() {
                if (index >= easings.length) {
                    index = 0;
                }
                
                startEasingDemo(easings[index]);
                index++;
                
                setTimeout(nextEasing, 3000);
            }
            
            nextEasing();
        }
        
        // å¼¹è·³çƒåŠ¨ç”»
        class Ball {
            constructor(x, y, radius, color) {
                this.x = x;
                this.y = y;
                this.vx = (Math.random() - 0.5) * 10;
                this.vy = Math.random() * -10 - 5;
                this.radius = radius;
                this.color = color;
                this.gravity = 0.5;
                this.bounce = 0.8;
                this.friction = 0.99;
                this.trail = [];
            }
            
            update(canvas) {
                // åº”ç”¨é‡åŠ›
                this.vy += this.gravity;
                
                // æ›´æ–°ä½ç½®
                this.x += this.vx;
                this.y += this.vy;
                
                // è¾¹ç•Œç¢°æ’æ£€æµ‹
                if (this.x + this.radius > canvas.width) {
                    this.x = canvas.width - this.radius;
                    this.vx *= -this.bounce;
                }
                if (this.x - this.radius < 0) {
                    this.x = this.radius;
                    this.vx *= -this.bounce;
                }
                if (this.y + this.radius > canvas.height) {
                    this.y = canvas.height - this.radius;
                    this.vy *= -this.bounce;
                    this.vx *= this.friction; // åœ°é¢æ‘©æ“¦
                }
                if (this.y - this.radius < 0) {
                    this.y = this.radius;
                    this.vy *= -this.bounce;
                }
                
                // æ›´æ–°è½¨è¿¹
                if (trailMode) {
                    this.trail.push({x: this.x, y: this.y});
                    if (this.trail.length > 20) {
                        this.trail.shift();
                    }
                }
            }
            
            draw(ctx) {
                // ç»˜åˆ¶è½¨è¿¹
                if (trailMode && this.trail.length > 1) {
                    ctx.strokeStyle = this.color;
                    ctx.lineWidth = 2;
                    ctx.globalAlpha = 0.3;
                    ctx.beginPath();
                    ctx.moveTo(this.trail[0].x, this.trail[0].y);
                    for (let i = 1; i < this.trail.length; i++) {
                        ctx.lineTo(this.trail[i].x, this.trail[i].y);
                    }
                    ctx.stroke();
                    ctx.globalAlpha = 1;
                }
                
                // ç»˜åˆ¶çƒ
                ctx.fillStyle = this.color;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, 2 * Math.PI);
                ctx.fill();
                
                // ç»˜åˆ¶é«˜å…‰
                ctx.fillStyle = 'rgba(255, 255, 255, 0.3)';
                ctx.beginPath();
                ctx.arc(this.x - this.radius * 0.3, this.y - this.radius * 0.3, this.radius * 0.3, 0, 2 * Math.PI);
                ctx.fill();
            }
        }
        
        let ballAnimationId;
        
        function toggleBallAnimation() {
            const btn = document.getElementById('ballBtn');
            
            if (!animationStates.ball) {
                animationStates.ball = true;
                btn.textContent = 'â¸ï¸ æš‚åœå¼¹è·³';
                btn.classList.add('active');
                if (balls.length === 0) {
                    addBall();
                }
                startBallAnimation();
            } else {
                animationStates.ball = false;
                btn.textContent = 'â–¶ï¸ å¼€å§‹å¼¹è·³';
                btn.classList.remove('active');
                if (ballAnimationId) {
                    cancelAnimationFrame(ballAnimationId);
                }
            }
        }
        
        function startBallAnimation() {
            const canvas = document.getElementById('ballCanvas');
            const ctx = canvas.getContext('2d');
            
            function animate() {
                if (!animationStates.ball) return;
                
                fpsCounter2.update();
                
                // æ¸…é™¤ç”»å¸ƒ
                if (!trailMode) {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                } else {
                    ctx.fillStyle = 'rgba(255, 255, 255, 0.1)';
                    ctx.fillRect(0, 0, canvas.width, canvas.height);
                }
                
                // æ›´æ–°å’Œç»˜åˆ¶æ‰€æœ‰çƒ
                balls.forEach(ball => {
                    ball.update(canvas);
                    ball.draw(ctx);
                });
                
                // æ›´æ–°FPSæ˜¾ç¤º
                document.getElementById('fpsCounter2').textContent = `FPS: ${fpsCounter2.getFPS()}`;
                
                ballAnimationId = requestAnimationFrame(animate);
            }
            
            animate();
        }
        
        function addBall() {
            const canvas = document.getElementById('ballCanvas');
            const colors = ['#e74c3c', '#3498db', '#2ecc71', '#f39c12', '#9b59b6', '#1abc9c'];
            const color = colors[Math.floor(Math.random() * colors.length)];
            const radius = 15 + Math.random() * 20;
            const x = radius + Math.random() * (canvas.width - radius * 2);
            const y = radius;
            
            balls.push(new Ball(x, y, radius, color));
        }
        
        function resetBalls() {
            balls = [];
            const canvas = document.getElementById('ballCanvas');
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }
        
        function toggleTrail() {
            trailMode = !trailMode;
            balls.forEach(ball => ball.trail = []);
        }
        
        // æ—¶é—´ç®¡ç†åŠ¨ç”»
        let timeAnimationId1, timeAnimationId2;
        let timeBasedX = 0, frameBasedX = 0;
        let lastTime = 0, frameCount = 0;
        
        function startTimeBasedAnimation() {
            const canvas = document.getElementById('timeCanvas');
            const ctx = canvas.getContext('2d');
            const speed = 100; // åƒç´ /ç§’
            
            function animate(currentTime) {
                const deltaTime = currentTime - lastTime;
                lastTime = currentTime;
                
                // åŸºäºæ—¶é—´çš„ç§»åŠ¨
                timeBasedX += speed * (deltaTime / 1000);
                if (timeBasedX > canvas.width / 2 - 25) {
                    timeBasedX = 25;
                }
                
                // æ¸…é™¤å·¦åŠéƒ¨åˆ†
                ctx.clearRect(0, 0, canvas.width / 2, canvas.height);
                
                // ç»˜åˆ¶åŸºäºæ—¶é—´çš„åŠ¨ç”»
                ctx.fillStyle = '#e74c3c';
                ctx.beginPath();
                ctx.arc(timeBasedX, 100, 20, 0, 2 * Math.PI);
                ctx.fill();
                
                // æ ‡ç­¾
                ctx.fillStyle = '#333';
                ctx.font = '14px Arial';
                ctx.fillText('åŸºäºæ—¶é—´ (æ’å®šé€Ÿåº¦)', 10, 30);
                ctx.fillText(`deltaTime: ${deltaTime.toFixed(1)}ms`, 10, 50);
                
                if (animationStates.time) {
                    timeAnimationId1 = requestAnimationFrame(animate);
                }
            }
            
            animationStates.time = true;
            lastTime = performance.now();
            animate(lastTime);
        }
        
        function startFrameBasedAnimation() {
            const canvas = document.getElementById('timeCanvas');
            const ctx = canvas.getContext('2d');
            
            function animate() {
                frameCount++;
                
                // åŸºäºå¸§çš„ç§»åŠ¨
                frameBasedX += 2; // æ¯å¸§ç§»åŠ¨2åƒç´ 
                if (frameBasedX > canvas.width - 25) {
                    frameBasedX = canvas.width / 2 + 25;
                }
                
                // æ¸…é™¤å³åŠéƒ¨åˆ†
                ctx.clearRect(canvas.width / 2, 0, canvas.width / 2, canvas.height);
                
                // ç»˜åˆ¶åŸºäºå¸§çš„åŠ¨ç”»
                ctx.fillStyle = '#3498db';
                ctx.beginPath();
                ctx.arc(frameBasedX, 100, 20, 0, 2 * Math.PI);
                ctx.fill();
                
                // åˆ†å‰²çº¿
                ctx.strokeStyle = '#ddd';
                ctx.lineWidth = 2;
                ctx.setLineDash([5, 5]);
                ctx.beginPath();
                ctx.moveTo(canvas.width / 2, 0);
                ctx.lineTo(canvas.width / 2, canvas.height);
                ctx.stroke();
                ctx.setLineDash([]);
                
                // æ ‡ç­¾
                ctx.fillStyle = '#333';
                ctx.font = '14px Arial';
                ctx.fillText('åŸºäºå¸§æ•° (é€Ÿåº¦éšå¸§ç‡å˜åŒ–)', canvas.width / 2 + 10, 30);
                ctx.fillText(`å¸§æ•°: ${frameCount}`, canvas.width / 2 + 10, 50);
                
                if (animationStates.time) {
                    timeAnimationId2 = requestAnimationFrame(animate);
                }
            }
            
            animate();
        }
        
        function stopTimeAnimations() {
            animationStates.time = false;
            if (timeAnimationId1) cancelAnimationFrame(timeAnimationId1);
            if (timeAnimationId2) cancelAnimationFrame(timeAnimationId2);
        }
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        window.addEventListener('load', function() {
            console.log('CanvasåŠ¨ç”»åŸºç¡€ç¤ºä¾‹é¡µé¢åŠ è½½å®Œæˆ');
        });
    </script>
</body>
</html> 